@using System.Web.Mvc.Html
@using Vitality.Website.Areas.Global.Models
@using Vitality.Website.Extensions.Models
@inherits Glass.Mapper.Sc.Web.Mvc.GlassView<Vitality.Website.Areas.Presales.Models.Navigation.MainNavigation>

<!-- top-bar mobile -->
<div class="top-bar top-bar--small">

    <div class="top-bar__home">

        <a href="/">
            <img src="/img/vitality-logo.svg" alt="Vitality" class="top-bar__logo">
        </a>

    </div>

    <ul class="utility-nav--small">

        <li class="utility-nav__item utility-nav__item--search js-search-toggle">

            <div class="utility-nav__inner">
                <a href="search.html">
                    <img src="/img/search.svg" alt="Search">
                    <span>Search</span>
                </a>
            </div>


        </li>

        <li class="utility-nav__item utility-nav__item--log-in js-log-in-toggle">

            <div class="utility-nav__inner ">
                <img src="/img/log-in.svg" alt="Log in">
                <span>Log In</span>
            </div>

        </li>

        <li class="utility-nav__item utility-nav__item--menu js-main-menu-toggle">

            <div class="utility-nav__inner">

                <div class="burger-menu"><span></span></div>

                <span>Menu</span>
            </div>

        </li>

    </ul>

</div>
<!-- end top-bar mobile -->
<!-- top-bar desktop - contains site nav -->
<div class="top-bar top-bar--large">

    <ul class="site-nav">

        @foreach (var navigationSection in Model.NavigationSections)
        {
            if (Model.GetActiveNavigationSection(SitecoreContext.GetCurrentItem<SitecoreItem>()).Equals(navigationSection))
            {
                <li class="site-nav__item is-active">
                    @RenderLink(navigationSection, item => item.SectionLink)
                </li>
            }
            else
            {
                <li class="site-nav__item">
                    @RenderLink(navigationSection, item => item.SectionLink)
                </li>
            }
        }

    </ul>

    <ul class="utility-nav">

        <li class="utility-nav__item utility-nav__item--search js-search-toggle">
            @using (BeginRenderLink(Model, item => item.SearchPage))
            {
                <img src="/img/search.svg" alt="Search">
                @Html.Raw(Model.SearchPage.Text)
            }
        </li>

        <li class="utility-nav__item utility-nav__item--log-in js-log-in-toggle">

            @RenderLink(Model, item => item.LogInLink)

            <!-- log in panel -->
            <div class="log-in log-in--large">
                <div class="log-in__content">

                    <div class="log-in__avatar">
                        @RenderImage(Model, item => item.LogInAvatar)
                    </div>

                    <p class="log-in__header">
                        @RenderLink(Model, item => item.LogInHeader)
                    </p>

                    <div class="log-in__links">
                        <a href="#log-in" class="box-button box-button--rounded box-button--secondary box-button--full-width">
                            @Html.Raw(Model.LogInText)
                        </a>
                        <a href="#register" class="box-button box-button--rounded box-button--full-width">
                            @Html.Raw(Model.RegisterText)
                        </a>
                    </div>

                    <div class="log-in__forgotten">
                        <a href="#forgot">
                            @Html.Raw(Model.ForgottenDetailsText)
                        </a>
                    </div>

                </div>
            </div>
            <!-- end log in panel desktop-->
        </li>

        <li class="utility-nav__item">
            @RenderLink(Model, item => item.ContactUsPage)
            @*<a href="/">Contact us</a>*@
        </li>

        <li class="utility-nav__item utility-nav__item--social">

            <ul class="social-icons-list">

                @foreach (var socialLink in Model.SocialLinks)
                {
                    <li class="social-icon">
                        @using (BeginRenderLink(socialLink, item => item.Link, new { _target="blank" }))
                        {
                            @RenderImage(socialLink, item => item.Image, isEditable: false)
                        }
                    </li>
                }

            </ul>

        </li>
    </ul>

</div><!-- end top-bar desktop-->
<!-- section-nav - for all sizes - contains megamenu -->
<!-- end section-nav -->

@Html.Partial("/Areas/Presales/Views/Navigation/NavigationSection.cshtml", Model.GetActiveNavigationSection(SitecoreContext.GetCurrentItem<SitecoreItem>()))

<!-- site-nav for mobile, moved to botom of menu -->
<ul class="site-nav--small">

    <li class="site-nav__item is-active">
        <a href="/">Personal</a>
    </li>

    <li class="site-nav__item">
        <a href="/">Business</a>
    </li>

    <li class="site-nav__item">
        <a href="/">Advisers</a>
    </li>

    <li class="site-nav__item">
        <a href="/">Healthcare Providers</a>
    </li>

    <li class="site-nav__item">
        <a href="/">Contact us</a>
    </li>

</ul>
