@using System.Web.Mvc.Html
@using Vitality.Website.Areas.Global.Models
@using Vitality.Website.Extensions.Models
@inherits Glass.Mapper.Sc.Web.Mvc.GlassView<Vitality.Website.Areas.Presales.Models.Navigation.MainNavigation>

@Html.Partial("/Areas/Presales/Views/Navigation/MobileNavigation.cshtml", Model)

<!-- top-bar desktop - contains site nav -->
<div class="top-bar top-bar--large">

    <ul class="site-nav">
        
        @foreach (var navigationSection in Model.NavigationSections)
        {
            if (Model.GetActiveNavigationSection(SitecoreContext.GetCurrentItem<SitecoreItem>()).Equals(navigationSection))
            {
                <li class="site-nav__item is-active">
                    @RenderLink(navigationSection, item => item.SectionLink)
                </li>
            }
            else
            {
                <li class="site-nav__item">
                    @RenderLink(navigationSection, item => item.SectionLink)
                </li>
            }
        }

    </ul>

    <ul class="utility-nav">

        <li class="utility-nav__item utility-nav__item--search js-search-toggle">
            @using (BeginRenderLink(Model, item => item.SearchPage))
            {
                <img src="/img/search.svg" alt="Search">
                @Html.Raw(Model.SearchPage.Text)
            }
        </li>

        <li class="utility-nav__item utility-nav__item--log-in js-log-in-toggle">

            @RenderLink(Model, item => item.LogInLink)

            <!-- log in panel -->
            <div class="log-in log-in--large">
                <div class="log-in__content">

                    <div class="log-in__avatar">
                        @RenderImage(Model, item => item.LogInAvatar)
                    </div>

                    <p class="log-in__header">
                        @RenderLink(Model, item => item.LogInHeader)
                    </p>

                    <div class="log-in__links">
                        <a href="#log-in" class="box-button box-button--rounded box-button--secondary box-button--full-width">
                            @Html.Raw(Model.LogInText)
                        </a>
                        <a href="#register" class="box-button box-button--rounded box-button--full-width">
                            @Html.Raw(Model.RegisterText)
                        </a>
                    </div>

                    <div class="log-in__forgotten">
                        <a href="#forgot">
                            @Html.Raw(Model.ForgottenDetailsText)
                        </a>
                    </div>

                </div>
            </div>
            <!-- end log in panel desktop-->
        </li>

        <li class="utility-nav__item">
            @RenderLink(Model, item => item.ContactUsPage)
        </li>

        <li class="utility-nav__item utility-nav__item--social">
            <ul class="social-icons-list">

                @foreach (var socialLink in Model.SocialLinks)
                {
                    <li class="social-icon">
                        @using (BeginRenderLink(socialLink, item => item.Link, new { _target="blank" }))
                        {
                            @RenderImage(socialLink, item => item.Image, isEditable: false)
                        }
                    </li>
                }

            </ul>
        </li>
    </ul>

</div><!-- end top-bar desktop-->
<!-- section-nav - for all sizes - contains megamenu -->
@Html.Partial("/Areas/Presales/Views/Navigation/NavigationSection.cshtml", Model.GetActiveNavigationSection(SitecoreContext.GetCurrentItem<SitecoreItem>()))
<!-- end section-nav -->

<!-- site-nav for mobile, moved to botom of menu -->
<ul class="site-nav--small">

    @foreach (var navigationSection in Model.NavigationSections)
    {
        if (Model.GetActiveNavigationSection(SitecoreContext.GetCurrentItem<SitecoreItem>()).Equals(navigationSection))
        {
            <li class="site-nav__item is-active">
                @RenderLink(navigationSection, item => item.SectionLink)
            </li>
        }
        else
        {
            <li class="site-nav__item">
                @RenderLink(navigationSection, item => item.SectionLink)
            </li>
        }
    }

    <li class="site-nav__item">
        @RenderLink(Model, item => item.ContactUsPage)
    </li>

</ul>
